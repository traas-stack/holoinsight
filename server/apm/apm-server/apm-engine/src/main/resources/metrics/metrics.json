[
  {
    "name": "apm_service_cpm",
    "index": "holoinsight-span",
    "field": "trace_id",
    "function": "cardinality",
    "groups": [
      "resource.service.name"
    ],
    "conditions": {
      "kind": [
        "SERVER",
        "CONSUMER"
      ]
    },
    "parent": "apm_span_materialized_cpm"
  },
  {
    "name": "apm_service_cpm_fail",
    "index": "holoinsight-span",
    "field": "trace_id",
    "function": "cardinality",
    "groups": [
      "resource.service.name"
    ],
    "conditions": {
      "trace_status": "2",
      "kind": [
        "SERVER",
        "CONSUMER"
      ]
    },
    "parent": "apm_span_materialized_cpm"
  },
  {
    "name": "apm_service_resp_time_total",
    "index": "holoinsight-span",
    "field": "latency",
    "function": "sum",
    "groups": [
      "resource.service.name"
    ],
    "conditions": {
      "kind": [
        "SERVER",
        "CONSUMER"
      ]
    },
    "parent": "apm_span_materialized_resp_time_total"
  },
  {
    "name": "apm_service_resp_time",
    "expr": "sum{apm_service_resp_time_total}/sum{apm_service_cpm}"
  },
  {
    "name": "apm_service_percentile",
    "index": "holoinsight-span",
    "field": "latency",
    "function": "percentiles",
    "groups": [
      "resource.service.name"
    ],
    "conditions": {
      "kind": [
        "SERVER",
        "CONSUMER"
      ]
    },
    "forceQuerySearchEngine": true
  },
  {
    "name": "apm_service_instance_cpm",
    "index": "holoinsight-span",
    "field": "trace_id",
    "function": "cardinality",
    "groups": [
      "resource.service.name",
      "resource.service.instance.name"
    ],
    "conditions": {
      "kind": [
        "SERVER",
        "CONSUMER"
      ]
    },
    "parent": "apm_span_materialized_cpm"
  },
  {
    "name": "apm_service_instance_cpm_fail",
    "index": "holoinsight-span",
    "field": "trace_id",
    "function": "cardinality",
    "groups": [
      "resource.service.name",
      "resource.service.instance.name"
    ],
    "conditions": {
      "trace_status": "2",
      "kind": [
        "SERVER",
        "CONSUMER"
      ]
    },
    "parent": "apm_span_materialized_cpm"
  },
  {
    "name": "apm_service_instance_resp_time_total",
    "index": "holoinsight-span",
    "field": "latency",
    "function": "sum",
    "groups": [
      "resource.service.name",
      "resource.service.instance.name"
    ],
    "conditions": {
      "kind": [
        "SERVER",
        "CONSUMER"
      ]
    },
    "parent": "apm_span_materialized_resp_time_total"
  },
  {
    "name": "apm_service_instance_resp_time",
    "expr": "sum{apm_service_instance_resp_time_total}/sum{apm_service_instance_cpm}"
  },
  {
    "name": "apm_service_instance_percentile",
    "index": "holoinsight-span",
    "field": "latency",
    "function": "percentiles",
    "groups": [
      "resource.service.name",
      "resource.service.instance.name"
    ],
    "conditions": {
      "kind": [
        "SERVER",
        "CONSUMER"
      ]
    },
    "forceQuerySearchEngine": true
  },
  {
    "name": "apm_endpoint_cpm",
    "index": "holoinsight-span",
    "field": "trace_id",
    "function": "cardinality",
    "groups": [
      "resource.service.name",
      "name"
    ],
    "conditions": {
    },
    "parent": "apm_span_materialized_cpm"
  },
  {
    "name": "apm_endpoint_cpm_fail",
    "index": "holoinsight-span",
    "field": "trace_id",
    "function": "cardinality",
    "groups": [
      "resource.service.name",
      "name"
    ],
    "conditions": {
      "trace_status": "2"
    },
    "parent": "apm_span_materialized_cpm"
  },
  {
    "name": "apm_endpoint_resp_time_total",
    "index": "holoinsight-span",
    "field": "latency",
    "function": "sum",
    "groups": [
      "resource.service.name",
      "name"
    ],
    "conditions": {
    },
    "parent": "apm_span_materialized_resp_time_total"
  },
  {
    "name": "apm_endpoint_resp_time",
    "expr": "sum{apm_endpoint_resp_time_total}/sum{apm_endpoint_cpm}"
  },
  {
    "name": "apm_endpoint_percentile",
    "index": "holoinsight-span",
    "field": "latency",
    "function": "percentiles",
    "groups": [
      "resource.service.name",
      "name"
    ],
    "conditions": {
    },
    "forceQuerySearchEngine": true
  },
  {
    "name": "apm_span_materialized_cpm",
    "index": "holoinsight-span",
    "field": "trace_id",
    "function": "cardinality",
    "groups": [
      "resource.tenant",
      "resource.service.name",
      "resource.service.instance.name",
      "name",
      "attributes.spanLayer",
      "kind",
      "trace_status"
    ],
    "conditions": {
    },
    "materialized": true
  },
  {
    "name": "apm_span_materialized_resp_time_total",
    "index": "holoinsight-span",
    "field": "latency",
    "function": "sum",
    "groups": [
      "resource.tenant",
      "resource.service.name",
      "resource.service.instance.name",
      "name",
      "attributes.spanLayer",
      "kind",
      "trace_status"
    ],
    "conditions": {
    },
    "materialized": true
  },
  {
    "name": "apm_span_materialized_percentile",
    "index": "holoinsight-span",
    "field": "latency",
    "function": "percentiles",
    "groups": [
      "resource.tenant",
      "resource.service.name",
      "resource.service.instance.name",
      "name",
      "attributes.spanLayer",
      "kind",
      "trace_status"
    ],
    "conditions": {
    },
    "materialized": true
  },
  {
    "name": "apm_component_cpm",
    "index": "holoinsight-service_relation",
    "field": "trace_id",
    "function": "cardinality",
    "groups": [],
    "conditions": {
      "type": "MQ"
    },
    "parent": "apm_component_materialized_cpm"
  },
  {
    "name": "apm_component_cpm_fail",
    "index": "holoinsight-service_relation",
    "field": "trace_id",
    "function": "cardinality",
    "groups": [],
    "conditions": {
      "type": "MQ",
      "is_error": "1"
    },
    "parent": "apm_component_materialized_cpm"
  },
  {
    "name": "apm_component_resp_time_total",
    "index": "holoinsight-service_relation",
    "field": "latency",
    "function": "sum",
    "groups": [],
    "conditions": {
      "type": "MQ"
    },
    "parent": "apm_component_materialized_resp_time_total"
  },
  {
    "name": "apm_component_resp_time",
    "expr": "sum{apm_component_resp_time_total}/sum{apm_component_cpm}"
  },
  {
    "name": "apm_component_percentile",
    "index": "holoinsight-service_relation",
    "field": "latency",
    "function": "percentiles",
    "groups": [],
    "conditions": {
      "type": "MQ"
    },
    "forceQuerySearchEngine": true
  },
  {
    "name": "apm_component_materialized_cpm",
    "index": "holoinsight-service_relation",
    "field": "trace_id",
    "function": "cardinality",
    "groups": [
      "tenant",
      "source_service_name",
      "dest_service_name",
      "component",
      "type",
      "is_error"
    ],
    "conditions": {
    },
    "materialized": true
  },
  {
    "name": "apm_component_materialized_resp_time_total",
    "index": "holoinsight-service_relation",
    "field": "latency",
    "function": "sum",
    "groups": [
      "tenant",
      "source_service_name",
      "dest_service_name",
      "component",
      "type",
      "is_error"
    ],
    "conditions": {
    },
    "materialized": true
  },
  {
    "name": "apm_component_materialized_percentile",
    "index": "holoinsight-service_relation",
    "field": "latency",
    "function": "percentiles",
    "groups": [
      "tenant",
      "source_service_name",
      "dest_service_name",
      "component",
      "type",
      "is_error"
    ],
    "conditions": {
    },
    "materialized": true
  }
]